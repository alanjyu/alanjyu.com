@use "../base/variables" as *;
@use "../functions/breakpoints" as breakpoint;

// Filter Section
.filter-section {
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: space-around;
	width: 360px;
	min-height: 200px;
	gap: $gap-tiny;
	background: var(--oscillator-color);
	box-shadow: var(--oscillator-shadow);
	border: var(--oscillator-border);
	border-radius: $border-radius-large;
	padding: $gap-large $gap-medium $gap-medium $gap-medium;
	position: relative;

	&__text {
		position: absolute;
		top: 0;
		left: 50%;
		margin-top: $gap-medium;
		transform: translateX(-50%);
		width: 100%;
		color: var(--text-color);
		filter: drop-shadow(0 0 4px rgba(255, 165, 0, 0.7));
		font-size: 12px;
		font-weight: 600;
		letter-spacing: 2px;
		text-transform: uppercase;
		text-align: center;
		pointer-events: none;
	}

	.filter-left {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}

	.filter-right {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: flex-start;
		flex: 1;
		gap: $gap-small;
	}

	.filter-visualizer {
		display: flex;
		height: 80px;
		width: 180px;
		background: var(--visualizer-color);
		box-shadow: var(--visualizer-shadow);
		border-radius: $border-radius;
		justify-content: center;
		align-items: center;
		position: relative;
		overflow: hidden;

		// Add screen scanlines effect
		&::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: repeating-linear-gradient(
				0deg,
				transparent,
				transparent 2px,
				rgba(255, 165, 0, 0.03) 2px,
				rgba(255, 165, 0, 0.03) 4px
			);
			pointer-events: none;
			z-index: 5;
		}
		
		// Add screen curvature effect
		&::after {
			content: '';
			position: absolute;
			top: 2px;
			left: 2px;
			right: 2px;
			bottom: 2px;
			border-radius: 6px;
			background: radial-gradient(
				ellipse at center,
				transparent 50%,
				rgba(0, 0, 0, 0.1) 100%
			);
			pointer-events: none;
			z-index: 6;
		}

		.filter-canvas {
			width: 100%;
			height: 100%;
		}
	}

	.filter-types {
		display: flex;
		flex-direction: column;
		gap: 8px;
		background: var(--waveforms-color);
		box-shadow: var(--waveforms-shadow);
		border: var(--waveforms-border);
		padding: 8px;
		border-radius: 6px;

		&__button {
			background: var(--waveform-button-color);
			width: 35px;
			height: 35px;
			border: var(--waveform-button-border);
			border-radius: 3px;
			color: $silk;
			font-size: 10px;
			font-weight: 700;
			padding: 2px;
			cursor: pointer;
			transition: all 0.2s ease;
			text-transform: uppercase;
			box-shadow: var(--waveform-button-shadow);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			gap: 1px;

			.filter-icon {
				pointer-events: none;
				width: 18px;
				height: 8px;
			}

			span {
				font-size: 5px;
				letter-spacing: 0.5px;
			}

			&:hover {
				background: var(--waveform-button-hover-color);
				color: var(--highlight-color);
				border-color: var(--waveform-button-hover-border);
				box-shadow: var(--waveform-button-hover-shadow);
			}

			&.selected {
				background: var(--waveform-button-selected-color);
				color: #000;
				border-color: var(--waveform-button-selected-border);
				box-shadow: var(--waveform-button-selected-shadow);

				.filter-icon {
					filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
				}
			}
		}
	}

	.filter-controls {
		display: flex;
		flex-direction: row;
		gap: $gap-tiny;
		justify-content: center;
		align-items: flex-start;
		flex-wrap: nowrap;

		.knob-controller {
			flex-shrink: 0;
		}
	}

	// Filter-specific knob styling
	.knob-controller {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 8px;
		min-width: 70px;
	}

	.knob-label {
		color: var(--knob-label-color);
		font-size: 7px;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.5px;
		width: 55px;
		text-align: center;
	}

	.knob-container {
		position: relative;
		width: 60px;
		height: 60px;

		@include breakpoint.respond-to("tablet") {
			width: 55px;
			height: 55px;
		}

		@include breakpoint.respond-to("mobile") {
			width: 50px;
			height: 50px;
		}
	}

	// Filter display styling
	.frequency-display, .resonance-display {
		background: var(--led-display-color);
		color: var(--led-display-text-color);
		font-size: 9px;
		font-weight: 700;
		text-align: center;
		padding: 3px 4px;
		border-radius: 4px;
		border: var(--led-display-border);
		box-shadow: var(--led-display-shadow);
		text-shadow: var(--led-display-text-shadow);
		width: 50px;
		height: 16px;
		display: flex;
		align-items: center;
		justify-content: center;
	}
}

// Shared knob styles for filter section
.filter-section {
	// Transform range inputs to look like knobs
	input[type="range"] {
		position: absolute;
		width: 100%;
		height: 100%;
		opacity: 0;
		cursor: pointer;
		z-index: 10;

		// Create knob appearance
		&::before {
			content: "";
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 50px;
			height: 50px;
			background: radial-gradient(circle at 30% 30%, #666, #333, #111);
			border-radius: 50%;
			border: 2px solid #444;
			box-shadow:
				0 6px 12px rgba(0, 0, 0, 0.6),
				inset 0 2px 4px rgba(255, 255, 255, 0.1),
				inset 0 -2px 4px rgba(0, 0, 0, 0.3);
			pointer-events: none;

			@include breakpoint.respond-to("tablet") {
				width: 45px;
				height: 45px;
			}

			@include breakpoint.respond-to("mobile") {
				width: 40px;
				height: 40px;
			}
		}

		// Knob indicator line
		&::after {
			content: "";
			position: absolute;
			top: 12px;
			left: 50%;
			transform: translateX(-50%);
			width: 2px;
			height: 15px;
			background: #00ff88;
			border-radius: 2px;
			box-shadow: 0 0 4px #00ff88;
			pointer-events: none;

			@include breakpoint.respond-to("tablet") {
				top: 10px;
				height: 13px;
				width: 2px;
			}

			@include breakpoint.respond-to("mobile") {
				top: 8px;
				height: 12px;
				width: 2px;
			}
		}
	}

	.knob {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 50px;
		height: 50px;
		background: var(--knob-color);
		border: var(--knob-border);
		box-shadow: var(--knob-shadow);
		border-radius: 50%;

		.knob-indicator {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			transition: transform 0.1s ease;

			// Knob indicator line
			&::before {
				content: "";
				position: absolute;
				top: 5px;
				left: 50%;
				transform: translateX(-50%);
				width: 3px;
				height: 20px;
				background: var(--knob-indicator-color);
				border-radius: 2px;
				box-shadow: var(--knob-indicator-shadow);
			}
		}

		// Center dot (static)
		&::after {
			content: "";
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 12px;
			height: 12px;
			background: var(--knob-center-color);
			border-radius: 50%;
			border: var(--knob-center-border);
		}
	}
}